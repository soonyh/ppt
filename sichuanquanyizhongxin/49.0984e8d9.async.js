(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{PC3t:function(e,a,n){"use strict";n.r(a);n("+L6B");var t,r,i,u=n("2/Rp"),c=(n("14J3"),n("BMrR")),l=(n("jCWc"),n("kPKH")),o=n("pVnL"),s=n.n(o),p=(n("5NDa"),n("5rEg")),d=(n("miYZ"),n("tsqr")),f=n("o0o1"),h=n.n(f),m=n("MVZn"),g=n.n(m),v=n("J4zp"),b=n.n(v),w=n("yXPU"),y=n.n(w),E=n("lwsE"),k=n.n(E),x=n("W8MJ"),O=n.n(x),I=n("a1gu"),z=n.n(I),M=n("Nsbk"),C=n.n(M),S=n("7W2i"),N=n.n(S),P=(n("OaEy"),n("2fM7")),L=(n("y8nQ"),n("Vl3Y")),D=n("q1tI"),q=n.n(D),K=n("g4mk"),V=n("257x"),j={upperId:{paramKey:"partnerOrgId"},upperName:{paramKey:"partnerOrgName",alwaysKeep:!0},serial:{paramKey:"orgCode"},organizationId:{paramKey:"orgId"},name:{paramKey:"orgName"},local:{paramKey:"lanId"},region:{paramKey:"regionId"}},A=Object(V["autoTransfer"])(j)(function(e){function a(){return k()(this,a),z()(this,C()(a).apply(this,arguments))}return N()(a,e),a}(V["BaseParamObject"])),J=(n("ovh5"),n("HUA2")),R=n("UOXh"),U=function(e){function a(){var e,n;k()(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return n=z()(this,(e=C()(a)).call.apply(e,[this].concat(r))),n.addOrganization=function(){var e=y()(h.a.mark(function e(a){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.fetchData("\u6dfb\u52a0\u7ec4\u7ec7",function(){return J["t"](a)}));case 1:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),n.getOrganizationDetail=function(){var e=y()(h.a.mark(function e(a){var t,r,i,u,c,l,o,s,p,d,f,m,g,v;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.fetchData("\u83b7\u53d6\u7ec4\u7ec7\u8be6\u60c5",function(){return J["l"](a)});case 2:if(t=e.sent,r=b()(t,2),i=r[0],u=r[1],!i){e.next=8;break}return e.abrupt("return",[i,null]);case 8:return c=u.lanId,l=u.orgCode,o=u.orgId,s=u.orgName,p=u.partnerOrgId,d=u.partnerOrgName,f=void 0===d?"":d,m=u.regionId,g={serial:l,name:s,region:m,upperName:f,local:c},v={upperId:p,organizationId:o},e.abrupt("return",[null,{formValues:g,cacheValues:v}]);case 12:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),n.updateOrganization=function(){var e=y()(h.a.mark(function e(a){var t,r,i,u;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.fetchData("\u4fee\u6539\u7ec4\u7ec7\u4fe1\u606f",function(){return J["x"](a)});case 2:if(t=e.sent,r=b()(t,2),i=r[0],u=r[1],!i){e.next=8;break}return e.abrupt("return",[i,null]);case 8:return e.abrupt("return",[null,u]);case 9:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),n}return N()(a,e),a}(R["a"]),F=n("aotc"),W=n("WnAZ"),B=[{label:"\u672c\u5730\u7f511",value:"1"},{label:"\u672c\u5730\u7f512",value:"2"},{label:"\u672c\u5730\u7f5131",value:"3"}],T=[{label:"\u8f96\u533a1",value:"1"},{label:"\u8f96\u533a2",value:"2"},{label:"\u8f96\u533a3",value:"3"}],Z=[{label:"\u7c7b\u578b1",value:"1"},{label:"\u7c7b\u578b2",value:"2"},{label:"\u7c7b\u578b3",value:"3"}],_=[{label:"\u6e20\u90531",value:"1"},{label:"\u6e20\u90532",value:"2"},{label:"\u6e20\u90533",value:"3"}],H=n("MuoO"),X=L["a"].Item,Y=P["a"].Option,G=12,Q={labelCol:{span:5},wrapperCol:{span:16,offset:1}},$=(t=Object(H["connect"])(function(e){var a=e.org;return{data:a}}),t((i=function(e){function a(e){var n;return k()(this,a),n=z()(this,C()(a).call(this,e)),n.initialState=function(){return{options:{locals:B,jurisdictions:T,businessTypes:Z,businessChannels:_,regions:[]},loading:!1}},n.initialCache=function(e){return{organizationId:"",organizationName:function(){return e.data.recode.name}(),pageMode:function(){switch(e.data.currentStep){case 3:return F["PageMode"].edit;case 2:return F["PageMode"].view;case 1:return F["PageMode"].new;default:return F["PageMode"].unknown}}()}},n.fetchRegionList=y()(h.a.mark(function e(){var a,t,r,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.service.fetchRegionList();case 2:if(a=e.sent,t=b()(a,2),r=t[0],i=t[1],!r){e.next=8;break}return e.abrupt("return");case 8:n.setState(function(e){var a=e.options;return{options:g()({},a,{regions:i})}});case 9:case"end":return e.stop()}},e,this)})),n.fetchLanList=y()(h.a.mark(function e(){var a,t,r,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.service.getLanList();case 2:if(a=e.sent,t=b()(a,2),r=t[0],i=t[1],!r){e.next=8;break}return e.abrupt("return");case 8:n.setState(function(e){var a=e.options;return{options:g()({},a,{locals:i})}});case 9:case"end":return e.stop()}},e,this)})),n.fetchOrganizationDetail=y()(h.a.mark(function e(){var a,t,r,i,u,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.service.getOrganizationDetail(n.props.data.recode.id);case 2:if(a=e.sent,t=b()(a,2),r=t[0],i=t[1],!r){e.next=8;break}return e.abrupt("return");case 8:u=i.formValues,c=i.cacheValues,l=n.props.form.setFieldsValue,l(u),n.cache=g()({},n.cache,c);case 12:case"end":return e.stop()}},e,this)})),n.postNewOrganization=function(){var e=y()(h.a.mark(function e(a){var t,r,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.service.addOrganization(a);case 2:if(t=e.sent,r=b()(t,2),i=r[0],r[1],n.setState({loading:!1}),!i){e.next=9;break}return e.abrupt("return");case 9:d["a"].success("\u4fdd\u5b58\u6210\u529f\uff01"),n.handleCancel(4);case 11:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),n.postUpdateOrganization=function(){var e=y()(h.a.mark(function e(a){var t,r,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.service.updateOrganization(a);case 2:if(t=e.sent,r=b()(t,2),i=r[0],r[1],n.setState({loading:!1}),!i){e.next=9;break}return e.abrupt("return");case 9:d["a"].success("\u4fdd\u5b58\u6210\u529f\uff01"),n.handleCancel(4);case 11:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFieldsAndScroll(function(e,a){if(!e){var t=["uniSerial","serial","name","type","intro","local","jurisdiction","region","businessType","businessChannel","upperName"],r=t.reduce(function(e,n){return e[n]=a[n],e},{upperId:n.props.data.recode.id});n.cache.pageMode===F["PageMode"].edit&&(r.organizationId=n.cache.organizationId);var i=new A(r),u=i.getParams();n.setState({loading:!0}),n.cache.pageMode===F["PageMode"].edit?(delete u.partnerOrgId,n.postUpdateOrganization(u)):n.postNewOrganization(u)}})},n.handleCancel=function(e){var a=n.props.dispatch;a({type:"org/saveStep",payload:{currentStep:e}})},n.renderInfoform=function(){var e=n.props.form.getFieldDecorator,a=n.state.options,t=n.cache.pageMode===F["PageMode"].edit,r=(a.locals||[]).map(function(e){return q.a.createElement(Y,{value:e.value,key:e.value},e.label)}),i=(a.regions||[]).map(function(e){return q.a.createElement(Y,{value:e.value,key:e.value},e.label)});return q.a.createElement(D["Fragment"],null,q.a.createElement(c["a"],null,q.a.createElement(l["a"],{span:G},q.a.createElement(X,s()({},Q,{label:"\u4e0a\u7ea7\u7ec4\u7ec7",required:!0}),e("upperName",{initialValue:n.cache.organizationName||""})(q.a.createElement(p["a"],{readOnly:!0,disabled:t}))))),q.a.createElement(c["a"],null,q.a.createElement(l["a"],{span:G},q.a.createElement(X,s()({},Q,{label:"\u7ec4\u7ec7\u7f16\u7801",required:!0}),e("serial",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7ec4\u7ec7\u7f16\u7801"}]})(q.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ec4\u7ec7\u7f16\u7801",disabled:t})))),q.a.createElement(l["a"],{span:G},q.a.createElement(X,s()({},Q,{label:"\u7ec4\u7ec7\u540d\u79f0",required:!0}),e("name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7ec4\u7ec7\u540d\u79f0"}]})(q.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ec4\u7ec7\u540d\u79f0"}))))),q.a.createElement(c["a"],null,q.a.createElement(l["a"],{span:G},q.a.createElement(X,s()({},Q,{label:"\u672c\u5730\u7f51"}),e("local")(q.a.createElement(P["a"],{disabled:t},r))))),q.a.createElement(c["a"],null,q.a.createElement(l["a"],{span:G},q.a.createElement(X,s()({},Q,{label:"\u533a\u57df",required:!0}),e("region",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u533a\u57df"}]})(q.a.createElement(P["a"],{disabled:t},i))))))},n.renderActions=function(){return q.a.createElement("div",null,q.a.createElement(u["a"],{style:{marginLeft:8},onClick:function(){n.handleCancel(0)}},"\u8fd4\u56de"),q.a.createElement(u["a"],{type:"primary",onClick:n.handleSubmit,loading:n.state.loading},"\u786e\u5b9a"))},n.state=n.initialState(),n.cache=n.initialCache(e),n.service=new U,n}return N()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.fetchRegionList(),this.fetchLanList(),this.cache.pageMode===F["PageMode"].edit&&this.fetchOrganizationDetail()}},{key:"render",value:function(){return q.a.createElement(K["a"],null,q.a.createElement(L["a"],{onSubmit:this.handleSubmit},this.renderInfoform()),q.a.createElement(W["a"],null,q.a.createElement("div",null,this.renderActions())))}}]),a}(D["Component"]),r=i))||r);a["default"]=L["a"].create()($)},aotc:function(e,a){var n={unknown:0,new:1,edit:2,view:3};e.exports={PageMode:n}},ovh5:function(e,a,n){e.exports={actions:"actions___59SG2"}}}]);