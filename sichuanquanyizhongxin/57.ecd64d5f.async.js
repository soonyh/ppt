(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[57],{XwfZ:function(e,t,a){"use strict";a.r(t);a("+L6B");var n,l,r,s=a("2/Rp"),c=(a("IzEo"),a("bx4M")),o=(a("14J3"),a("BMrR")),i=(a("jCWc"),a("kPKH")),u=a("pVnL"),p=a.n(u),d=(a("miYZ"),a("tsqr")),m=a("lwsE"),f=a.n(m),v=a("W8MJ"),h=a.n(v),E=a("a1gu"),_=a.n(E),g=a("Nsbk"),y=a.n(g),b=a("7W2i"),k=a.n(b),R=(a("sRBo"),a("kaz8")),S=(a("y8nQ"),a("Vl3Y")),A=a("q1tI"),I=a.n(A),C=a("MuoO"),w=a("g4mk"),N=a("WnAZ"),L=a("ceAL"),W=a.n(L),D=a("HUA2"),G=a("k9Yu"),O=S["a"].Item,x=R["a"].Group,H={labelCol:{span:4},wrapperCol:{span:17,offset:1}},M=(n=Object(C["connect"])(function(e){var t=e.account;return{data:t}}),n((r=function(e){function t(e){var a;return f()(this,t),a=_()(this,y()(t).call(this,e)),a.handleSubmit=function(e){e.preventDefault();var t=a.record.userId;a.setState({loading:!0}),G["k"]({userId:t,roleIdList:a.state.currentRoles}).then(function(e){"0"==e.resultCode&&(d["a"].success("\u4fdd\u5b58\u6210\u529f\uff01"),a.cancle()),a.setState({loading:!1})})},a.changeOptions=function(e){a.setState({currentRoles:e})},a.cancle=function(){var e=a.props,t=e.dispatch;e.data;t({type:"account/saveStep",payload:{currentStep:0}})},a.validate=function(){var e=a.props,t=e.form.validateFieldsAndScroll,n=e.dispatch;t(function(e,t){e||n({type:"form/submitAdvancedForm",payload:t})})},a.state={roles:[],currentRoles:[],loading:!1},a.record=e.data.recode,a}return k()(t,e),h()(t,[{key:"componentWillMount",value:function(){this.getAllRoles(),this.getCurrentRoles()}},{key:"getAllRoles",value:function(){var e=this;Object(D["g"])().then(function(t){if(Array.isArray(t.resultData)){var a=t.resultData.map(function(e){return{label:e.roleName,value:e.roleId}});e.setState({roles:a})}})}},{key:"getCurrentRoles",value:function(){var e=this,t=this.record.userId,a=[];G["f"]({userId:t}).then(function(t){var n=t.resultData.userRoleList;n&&(n.map(function(e){return a.push(e.roleId)}),e.setState({currentRoles:a},e.getAllRoles()))})}},{key:"render",value:function(){var e=this;return I.a.createElement("div",null,I.a.createElement(c["a"],{title:"\u914d\u7f6e\u89d2\u8272"},I.a.createElement(w["a"],null,I.a.createElement(S["a"],{onSubmit:this.handleSubmit},I.a.createElement("div",{className:W.a.title},"\u8d26\u53f7\u4fe1\u606f"),I.a.createElement(o["a"],null,I.a.createElement(i["a"],{span:24},I.a.createElement(O,p()({},H,{label:"\u767b\u9646\u8d26\u53f7\uff1a"}),I.a.createElement("div",{className:W.a.inputGroup},I.a.createElement("div",{className:W.a.cell},this.record.userName))))),I.a.createElement("div",{className:W.a.title},"\u89d2\u8272\u8bbe\u7f6e"),I.a.createElement(o["a"],null,I.a.createElement(i["a"],{span:24},I.a.createElement(O,p()({},H,{label:"\u8d26\u53f7\u89d2\u8272\uff1a"}),I.a.createElement("div",{className:W.a.inputGroup},I.a.createElement("div",{className:W.a.cell},I.a.createElement(x,{options:this.state.roles,value:this.state.currentRoles,onChange:this.changeOptions}))))))))),I.a.createElement(N["a"],null,I.a.createElement("div",null,I.a.createElement(s["a"],{style:{marginLeft:"16px"},onClick:function(){return e.cancle()}},"\u8fd4\u56de"),I.a.createElement(s["a"],{style:{marginLeft:"16px"},type:"primary",onClick:this.handleSubmit,loading:this.state.loading},"\u63d0\u4ea4"))))}}]),t}(A["Component"]),l=r))||l);t["default"]=S["a"].create()(M)},ceAL:function(e,t,a){e.exports={inputGroup:"inputGroup___2xHfI",cell:"cell___2KWy1",addon:"addon___2WFmy",panel:"panel___vKE3D",panelHead:"panelHead___1fOa7",panelTit:"panelTit___G2l5l",panelTools:"panelTools___1qB3c",title:"title___3lV9D"}}}]);