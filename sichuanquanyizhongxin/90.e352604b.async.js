(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[90],{SgR0:function(e,a,t){"use strict";t.r(a);t("+L6B");var r,l,o,n,m=t("2/Rp"),d=(t("IzEo"),t("bx4M")),s=(t("14J3"),t("BMrR")),i=(t("jCWc"),t("kPKH")),c=(t("5NDa"),t("5rEg")),p=(t("miYZ"),t("tsqr")),u=t("MVZn"),h=t.n(u),E=t("lwsE"),f=t.n(E),v=t("W8MJ"),T=t.n(v),g=t("a1gu"),y=t.n(g),I=t("Nsbk"),b=t.n(I),F=t("7W2i"),N=t.n(F),w=(t("y8nQ"),t("Vl3Y")),C=(t("iQDF"),t("+eQT")),V=(t("OaEy"),t("2fM7")),q=t("q1tI"),k=t.n(q),R=t("MuoO"),M=t("WnAZ"),A=t("BOMC"),D=t("TZte"),L=V["a"].Option,P=(C["a"].RangePicker,{adapterTemplateName:"\u6a21\u677f\u540d\u79f0",adapterTemplateCode:"\u6a21\u677f\u7f16\u7801",adapterTemplateVersion:"\u7248\u672c\u53f7",adapterTemplateType:"\u6a21\u677f\u7c7b\u578b",status:"\u6a21\u677f\u72b6\u6001",exchangeProtocol:"\u4ea4\u4e92\u534f\u8bae\u7c7b\u578b",sourceFrom:"\u5e73\u53f0"}),S=(r=Object(R["connect"])(function(e){var a=e.adapterTemplate;return{data:a}}),l=w["a"].create(),r(o=l((n=function(e){function a(e){var t;return f()(this,a),t=y()(this,b()(a).call(this,e)),t.resizeFooterToolbar=function(){requestAnimationFrame(function(){var e=document.querySelectorAll(".ant-layout-sider")[0];if(e){var a="calc(100% - ".concat(e.style.width,")"),r=t.state.width;r!==a&&t.setState({width:a})}})},t.validate=function(){var e=t.props,a=e.form.validateFieldsAndScroll,r=e.dispatch;a(function(e,a){if(!e){var l=t.props.data.record||{};a.adapterTemplateId=l.adapterTemplateId,D["f"](h()({},a)).then(function(e){"0"==e.resultCode?(p["a"].success("\u4fdd\u5b58\u6210\u529f\uff01"),t.cancle(3)):p["a"].error(e.resultMsg)}),r({type:"form/submitAdvancedForm",payload:a})}})},t.cancle=function(e){var a=t.props.dispatch;a({type:"adapterTemplate/saveStep",payload:{currentStep:e}})},t.onRef=function(e){t.child=e},t.getFromNodeList=function(e){t.child.getFromNodeList(e)},t.setsourceFromId=function(e){t.child.setsourceFromId(e)},t.state={sourceFromId:e.data.record.sourceFrom,nodeList:[],tableData:t.queryAdapterTemplateResNode(e.data.record.adapterTemplateId)},t}return N()(a,e),T()(a,[{key:"queryAdapterTemplateResNode",value:function(e){var a=this,t={adapterTemplateId:e};D["i"](t).then(function(e){if(e.resultData){var t=[];e.resultData.records.map(function(e){return t.push({key:e.adapterTemplateResNodeId,fromNodeId:e.fromAdapterTemplateNodeId,fromNodeIdComments:e.fromNodeIdComments,toNodeId:e.toAdapterTemplateNodeId,toNodeIdComments:e.toNodeIdComments,editable:!1})}),a.setState({tableData:t})}})}},{key:"componentDidMount",value:function(){this.setsourceFromId(this.state.sourceFromId);var e=this.props.dispatch;e({type:"adapterTemplate/updateValue",payload:{value:""}}),window.addEventListener("resize",this.resizeFooterToolbar,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"render",value:function(){var e=this,a=this.props,t=a.form.getFieldDecorator,r=a.submitting,l=this.state.width,o=this.props.data.record||{};return this.state.sourceFromId=o.sourceFrom,k.a.createElement("div",{style:{paddingBottom:"80px"}},k.a.createElement(d["a"],{title:"\u9002\u914d\u6a21\u677f",bordered:!1,style:{marginBottom:24}},k.a.createElement(w["a"],{layout:"vertical",hideRequiredMark:!0},k.a.createElement(s["a"],{gutter:16},k.a.createElement(i["a"],{lg:6,md:12,sm:24},k.a.createElement(w["a"].Item,{label:P.adapterTemplateName},t("adapterTemplateName",{initialValue:o.adapterTemplateName||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9002\u914d\u6a21\u677f\u540d\u79f0"}]})(k.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u9002\u914d\u6a21\u677f\u540d\u79f0"})))),k.a.createElement(i["a"],{lg:6,md:12,sm:24},k.a.createElement(w["a"].Item,{label:P.adapterTemplateCode},t("adapterTemplateCode",{initialValue:o.adapterTemplateCode||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9002\u914d\u6a21\u677f\u7f16\u7801"}]})(k.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u9002\u914d\u6a21\u677f\u7f16\u7801"})))),k.a.createElement(i["a"],{lg:6,md:12,sm:24},k.a.createElement(w["a"].Item,{label:P.adapterTemplateVersion},t("adapterTemplateVersion",{initialValue:o.adapterTemplateVersion||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7248\u672c\u53f7"}]})(k.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u7248\u672c\u53f7"})))),k.a.createElement(i["a"],{lg:6,md:12,sm:24},k.a.createElement(w["a"].Item,{label:P.sourceFrom},t("sourceFrom",{initialValue:o.sourceFrom||"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6e90\u5e73\u53f0"}]})(k.a.createElement(V["a"],{placeholder:"\u8bf7\u9009\u62e9",onChange:function(a,t){e.getFromNodeList(a)},style:{width:"100%"}},k.a.createElement(L,{value:"2"},"\u7231\u5947\u827a"),k.a.createElement(L,{value:"3"},"\u817e\u8baf"),k.a.createElement(L,{value:"4"},"\u4f18\u9177")))))),k.a.createElement(s["a"],{gutter:16},k.a.createElement(i["a"],{lg:6,md:12,sm:24},k.a.createElement(w["a"].Item,{label:P.adapterTemplateType},t("adapterTemplateType",{initialValue:o.adapterTemplateType||"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6a21\u677f\u7c7b\u578b"}]})(k.a.createElement(V["a"],{placeholder:"\u8bf7\u9009\u62e9\u6a21\u677f\u7c7b\u578b"},k.a.createElement(L,{value:"in"},"\u5165\u53c2"),k.a.createElement(L,{value:"out"},"\u51fa\u53c2"))))),k.a.createElement(i["a"],{lg:6,md:12,sm:24},k.a.createElement(w["a"].Item,{label:P.exchangeProtocol},t("exchangeProtocol",{initialValue:o.exchangeProtocol||"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ea4\u4e92\u534f\u8bae\u7c7b\u578b"}]})(k.a.createElement(V["a"],{placeholder:"\u8bf7\u9009\u62e9\u4ea4\u4e92\u534f\u8bae\u7c7b\u578b"},k.a.createElement(L,{value:"1"},"webservice"),k.a.createElement(L,{value:"2"},"http"))))),k.a.createElement(i["a"],{lg:6,md:12,sm:24},k.a.createElement(w["a"].Item,{label:P.status},t("status",{initialValue:o.status||0,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6a21\u677f\u72b6\u6001"}]})(k.a.createElement(V["a"],{placeholder:"\u8bf7\u9009\u62e9\u6a21\u677f\u72b6\u6001"},k.a.createElement(L,{value:"1"},"\u6709\u6548"),k.a.createElement(L,{value:"0"},"\u65e0\u6548")))))))),k.a.createElement(d["a"],{title:"\u5bf9\u5e94\u9002\u914d\u5c5e\u6027\u7ba1\u7406",bordered:!1},t("nodeRes",{initialValue:this.state.tableData})(k.a.createElement(A["a"],{onRef:this.onRef}))),k.a.createElement(M["a"],{style:{width:l}},k.a.createElement(m["a"],{type:"default",onClick:function(){return e.cancle(0)}},"\u8fd4\u56de"),k.a.createElement(m["a"],{type:"primary",onClick:this.validate,loading:r},"\u63d0\u4ea4")))}}]),a}(q["PureComponent"]),o=n))||o)||o);a["default"]=S}}]);