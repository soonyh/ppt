(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[51],{IhtB:function(e,t,a){e.exports={tableList:"tableList___tO05F",tableListOperator:"tableListOperator___3QpBS",tableListForm:"tableListForm___2i18W",submitButtons:"submitButtons___1xEcA"}},L0CN:function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,l,i,s=a("bx4M"),o=(a("g9YV"),a("wCAj")),c=(a("/zsF"),a("PArb")),m=(a("OaEy"),a("2fM7")),d=(a("iQDF"),a("+eQT")),p=(a("14J3"),a("BMrR")),u=(a("Pwec"),a("CtXQ")),f=(a("+L6B"),a("2/Rp")),h=(a("giR+"),a("fyUT")),y=(a("jCWc"),a("kPKH")),g=a("pVnL"),E=a.n(g),k=(a("5NDa"),a("5rEg")),v=(a("2qtc"),a("kLXV")),b=a("MVZn"),w=a.n(b),F=a("lwsE"),I=a.n(F),L=a("W8MJ"),x=a.n(L),S=a("a1gu"),D=a.n(S),C=a("Nsbk"),T=a.n(C),O=a("7W2i"),M=a.n(O),N=(a("y8nQ"),a("Vl3Y")),R=a("q1tI"),V=a.n(R),_=a("MuoO"),Y=a("wd/R"),j=a.n(Y),q=a("d+1c"),B=a("Puqe"),P=a.n(B),z=a("IhtB"),A=a.n(z),Q={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},J=(r=Object(_["connect"])(function(e){var t=e.taskList,a=e.scene,r=e.loading;return{taskList:t,index:a.index,params:a.arr,queryTaskListLoading:r.effects["taskList/queryTaskList"]}}),n=N["a"].create(),r(l=n((i=function(e){function t(){var e,a;I()(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return a=D()(this,(e=T()(t)).call.apply(e,[this].concat(n))),a.state={expandForm:!0,formValues:{},pagination:{current:1,pageSize:10},filteredInfo:{},sortedInfo:{field:"createDate",order:"descend"},orderType:[],staffOrg:[]},a.handleFormReset=function(){var e=a.props,t=e.form;e.dispatch;t.resetFields(),a.setState({formValues:{},sortedInfo:{},filteredInfo:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,r=t.dispatch,n=t.form,l=a.state,i=l.pagination,s=l.sortedInfo,o=l.filteredInfo;n.validateFields(function(e,t){if(!e){var n=j()(t.createDateRange[0]).format("YYYY-MM-DD"),l=j()(t.createDateRange[1]).format("YYYY-MM-DD"),c=w()({},P()(t,"createDateRange"),{beginDate:n,endDate:l});a.setState({formValues:c}),r({type:"taskList/queryTaskList",payload:w()({},c,i,s,o)})}})},a.handleChange=function(e,t,r){var n=a.props,l=n.dispatch,i=(n.form,r.field),s=r.order,o=e.current,c=e.pageSize;a.setState({filteredInfo:t,sortedInfo:{field:i,order:s},current:o,pageSize:c}),l({type:"taskList/queryTaskList",payload:w()({current:o,pageSize:c,field:i,order:s},t,a.state.formValues)})},a.deleteItem=function(e){v["a"].confirm({title:"\u5220\u9664\u4efb\u52a1",content:"\u786e\u5b9a\u5220\u9664\u8be5\u4efb\u52a1\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){}})},a.viewDetail=function(e){var t=a.props.dispatch;t({type:"scene/saveScene",payload:{index:1,params:e}})},a}return M()(t,e),x()(t,[{key:"componentDidMount",value:function(){var e=this;Object(q["c"])().then(function(t){e.setState({orderType:t.resultObject.orderType,staffOrg:t.resultObject.staffOrg})}),console.log(this.props.form.getFieldsValue())}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return V.a.createElement(N["a"],{onSubmit:this.handleSearch},V.a.createElement(p["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u4efb\u52a1\u540d\u79f0"},Q),e("taskName",{rules:[{required:!0,message:"Input something!"}]})(V.a.createElement(k["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u4efb\u52a1\u5355\u53f7"},Q),e("taskNumber")(V.a.createElement(h["a"],{style:{width:"100%"}})))),V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement("span",{className:A.a.submitButtons},V.a.createElement(f["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),V.a.createElement(f["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),V.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",V.a.createElement(u["a"],{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.orderType,r=t.staffOrg;return V.a.createElement(N["a"],{onSubmit:this.handleSearch},V.a.createElement(p["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u4efb\u52a1\u540d\u79f0"},Q),e("taskName")(V.a.createElement(k["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u4efb\u52a1\u5355\u53f7"},Q),e("taskNumber")(V.a.createElement(h["a"],{style:{width:"100%"}})))),V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u4efb\u52a1\u53d1\u8d77\u4eba"},Q),e("taskCreator")(V.a.createElement(k["a"],{style:{width:"100%"}}))))),V.a.createElement(p["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u7533\u8bf7\u65f6\u95f4"},Q),e("createDateRange",{initialValue:[j()().add(-30,"days"),j()()]})(V.a.createElement(d["a"].RangePicker,{style:{width:"100%"},disabledDate:function(e){return e&&e>j()().endOf("day")}})))),V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u4efb\u52a1\u5355\u7c7b\u578b"},Q),e("orderType")(V.a.createElement(m["a"],{style:{width:"100%"},showSearch:!0,optionFilterProp:"children"},a.length>0?a.map(function(e){return V.a.createElement(m["a"].Option,{key:e.pcode,title:"soon"},e.pname)}):null)))),V.a.createElement(y["a"],{md:8,sm:24},V.a.createElement(N["a"].Item,E()({label:"\u90e8\u95e8\u7c7b\u578b"},Q),e("staffOrg")(V.a.createElement(m["a"],{style:{width:"100%"},showSearch:!0,optionFilterProp:"children"},r.length>0?r.map(function(e){return V.a.createElement(m["a"].Option,{key:e.pcode},e.pname)}):null))))),V.a.createElement("div",{style:{overflow:"hidden"}},V.a.createElement("div",{style:{float:"right",marginBottom:24}},V.a.createElement(f["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),V.a.createElement(f["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),V.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",V.a.createElement(u["a"],{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.taskList,r=a.list,n=a.pagination,l=t.queryTaskListLoading,i=this.state,m=i.filteredInfo,d=i.sortedInfo;return V.a.createElement(s["a"],{title:"\u6211\u662f\u6807\u9898\u6211\u662f\u6807\u9898",extra:V.a.createElement(f["a"],{icon:"plus",type:"primary",ghost:!0,onClick:function(){e.props.dispatch({type:"scene/saveScene",payload:{index:1}})}},"\u521b\u5efa\u4efb\u52a1")},V.a.createElement("div",{className:A.a.tableList},V.a.createElement("div",{className:A.a.tableListForm},this.renderForm()),V.a.createElement(o["a"],{loading:l,rowKey:function(e){return e.id},columns:[{title:"\u4efb\u52a1\u5355\u7c7b\u578b/\u540d\u79f0",dataIndex:"taskName",render:function(t,a){return V.a.createElement("a",{href:"javascript:;",onClick:function(){e.props.dispatch({type:"scene/saveScene",payload:{index:2,params:a}})}},"\u3010".concat(a.orderType,"\u3011\n ").concat(t))}},{title:"\u4efb\u52a1\u5355\u53f7",width:"12%",dataIndex:"taskNumber"},{title:"\u4efb\u52a1\u53d1\u8d77\u4eba",width:"12%",dataIndex:"taskCreator"},{title:"\u5f53\u524d\u73af\u8282",width:"18%",dataIndex:"currentTache",filters:[{text:"Male",value:"male"},{text:"Female",value:"female"}],filteredValue:m.currentTache||null,filterMultiple:!0},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createDate",width:"17%",sorter:!0,sortOrder:"createDate"===d.field&&d.order},{title:"\u64cd\u4f5c",key:"action",width:"12%",render:function(t,a){return V.a.createElement("span",null,V.a.createElement("a",{href:"javascript:;",onClick:function(){e.props.dispatch({type:"scene/saveScene",payload:{index:1,params:a}})}},"\u7f16\u8f91"),V.a.createElement(c["a"],{type:"vertical"}),V.a.createElement("a",{href:"javascript:;",onClick:function(){return e.deleteItem(a)}},"\u5220\u9664"))}}],dataSource:r,pagination:w()({},n,{showQuickJumper:!0,showTotal:function(e){return"\u5171".concat(e,"\u6761")}}),onChange:this.handleChange})))}}]),t}(R["PureComponent"]),l=i))||l)||l);t["default"]=J}}]);