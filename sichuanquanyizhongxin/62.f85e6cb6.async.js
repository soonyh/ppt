(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{oU8Y:function(e,a,t){"use strict";t.r(a);t("T2oS");var n,r,l,i,c,u,s,o,d,p,m,b=t("W9HT"),h=(t("2qtc"),t("kLXV")),f=(t("14J3"),t("BMrR")),v=(t("g9YV"),t("wCAj")),E=(t("jCWc"),t("kPKH")),g=(t("+L6B"),t("2/Rp")),y=t("pVnL"),S=t.n(y),O=t("lSNA"),w=t.n(O),A=(t("miYZ"),t("tsqr")),k=t("MVZn"),C=t.n(k),M=t("RIqP"),I=t.n(M),j=t("J4zp"),N=t.n(j),x=t("o0o1"),F=t.n(x),V=t("yXPU"),D=t.n(V),R=t("lwsE"),K=t.n(R),P=t("W8MJ"),T=t.n(P),B=t("a1gu"),L=t.n(B),q=t("Nsbk"),z=t.n(q),H=t("7W2i"),W=t.n(H),G=(t("Znn+"),t("ZTPi")),U=t("q1tI"),J=t.n(U),Y=t("g4mk"),Z=t("Bf72"),Q=(t("5NDa"),t("5rEg")),X=(t("OaEy"),t("2fM7")),_=(t("y8nQ"),t("Vl3Y")),$=t("wIs1"),ee=t("mD99"),ae=(t("etS8"),t("MuoO")),te=t("HUA2"),ne=_["a"].Item,re=(X["a"].Option,{labelCol:{span:4},wrapperCol:{span:17,offset:1}}),le=(n=Object(ae["connect"])(function(e){var a=e.meta;return{data:a}}),n(r=function(e){function a(e){var t;return K()(this,a),t=L()(this,z()(a).call(this,e)),t.state={formValue:t.props.InfoForm},t.cache={pageMode:e.data.currentStep},t}return W()(a,e),T()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.props.options;var e=this.cache.pageMode===ee["a"].view,a=this.props.form.getFieldDecorator;return J.a.createElement(_["a"],null,J.a.createElement(f["a"],null,J.a.createElement(E["a"],{span:24},J.a.createElement(ne,S()({},re,{label:"\u4e1a\u52a1\u5bf9\u8c61\u540d\uff1a"}),a("busiObjName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e1a\u52a1\u5bf9\u8c61\u540d\u79f0!"}]})(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165",disabled:e}))))),J.a.createElement(f["a"],null,J.a.createElement(E["a"],{span:24},J.a.createElement(ne,S()({},re,{label:"\u4e1a\u52a1\u5bf9\u8c61\u63cf\u8ff0\uff1a"}),a("busiObjDesc")(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165",disabled:e}))))),J.a.createElement(f["a"],null,J.a.createElement(E["a"],{span:24},J.a.createElement(ne,S()({},re,{label:"\u4e1a\u52a1\u5bf9\u8c61\u7f16\u7801\uff1a"}),a("busiObjNbr",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e1a\u52a1\u5bf9\u8c61\u7f16\u7801!"}]})(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165",disabled:e}))))),J.a.createElement(f["a"],null,J.a.createElement(E["a"],{span:24},J.a.createElement(ne,S()({},re,{label:"\u7236\u4e1a\u52a1\u5bf9\u8c61\uff1a"}),a("parBusiObjId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\uff01"}]})(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u9009\u62e9",disabled:e}))))))}}]),a}(U["Component"]))||r),ie={onFieldsChange:function(e,a){e.handleFormFieldsChange(a)},mapPropsToFields:function(e){var a=["busiObjName","busiObjDesc","busiObjNbr","parBusiObjId","busiObjId"],t={};return a.forEach(function(a){t[a]=_["a"].createFormField(C()({},e[a],{value:e[a].value}))}),t}},ce=_["a"].create(ie)(le),ue=Object($["a"])(Object(ee["b"])(ce,2)),se=ue,oe=(t("7Kak"),t("9yH6")),de=_["a"].Item,pe=(X["a"].Option,10),me={labelCol:{span:8},wrapperCol:{span:15,offset:1}},be=function(e){function a(){var e,t;K()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=L()(this,(e=z()(a)).call.apply(e,[this].concat(r))),t.handleSubmit=function(e){e.preventDefault(),t.props.handleQuery&&t.props.handleQuery()},t}return W()(a,e),T()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return J.a.createElement(_["a"],{onSubmit:this.handleSubmit},J.a.createElement(f["a"],null,J.a.createElement(E["a"],{span:pe},J.a.createElement(de,S()({},me,{label:"\u89d2\u8272\u7f16\u7801"}),e("id")(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),J.a.createElement(E["a"],{span:pe},J.a.createElement(de,S()({},me,{label:"\u89d2\u8272\u540d\u79f0"}),e("name")(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),J.a.createElement(E["a"],{span:4},J.a.createElement(de,{style:{textAlign:"right"}},J.a.createElement(g["a"],{htmlType:"submit",type:"primary"},"\u641c\u7d22")))))}}]),a}(U["Component"]),he={onFieldsChange:function(e,a){e.handleFormFieldsChange(a)},mapPropsToFields:function(e){var a=["id","name"],t={};return a.forEach(function(a){t[a]=_["a"].createFormField(C()({},e[a],{value:e[a].value}))}),t}},fe=(_["a"].create(he)(be),t("dP+C")),ve=function(e){return e.value},Ee={id:{paramKey:"roleId",optional:!0,reduceRule:{reducers:[ve]}},name:{paramKey:"roleName",optional:!0,reduceRule:{reducers:[ve]}},pageNo:{paramKey:"pageNo"},pageSize:{paramKey:"pageSize"}},ge=(Object(fe["createParamObjectWithMetaInfo"])(Ee),t("UOXh")),ye=Q["a"].TextArea,Se=_["a"].Item,Oe={labelCol:{span:6},wrapperCol:{span:15,offset:1}},we=12,Ae=(l=Object(ae["connect"])(function(e){var a=e.meta;return{data:a}}),l((c=function(e){function a(e){var t;return K()(this,a),t=L()(this,z()(a).call(this,e)),t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){"add"===t.action?api.addAttrSpec(a).then(function(e){"0"==e.resultCode&&message.success("\u5c5e\u6027\u89c4\u683c\u65b0\u589e\u6210\u529f!")}):api.updateAttrSpec(a).then(function(e){"0"==e.resultCode&&message.success("\u5c5e\u6027\u89c4\u683c\u66f4\u65b0\u6210\u529f!")})})},t.state={},t.cache={pageMode:e.data.currentStep},t}return W()(a,e),T()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=this.cache.pageMode===ee["a"].view,t=this.cache.pageMode===ee["a"].edit;return J.a.createElement(_["a"],{onSubmit:this.handleSubmit},J.a.createElement(f["a"],null,J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u4e1a\u52a1\u5bf9\u8c61"}),e("busiObjName",{})(J.a.createElement(Q["a"],{value:this.props.busiObjName,disabled:a||t})))),J.a.createElement(E["a"],{style:{display:"none"}},J.a.createElement(Se,S()({},Oe,{label:"\u4e1a\u52a1\u5bf9\u8c61\u6807\u8bc6",required:!0}),e("busiObjId",{})(J.a.createElement(Q["a"],{value:this.props.busiObjId,disabled:a||t})))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u5c5e\u6027\u7f16\u7801",required:!0}),e("attrNbr",{})(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165\u5c5e\u6027\u7f16\u7801",disabled:a||t})))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u5c5e\u6027\u540d\u79f0",required:!0}),e("attrName",{})(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165\u5c5e\u6027\u540d\u79f0",disabled:a})))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u9ed8\u8ba4\u503c",required:!0}),e("defaultValue",{})(J.a.createElement(Q["a"],{placeholder:"\u8bf7\u8f93\u5165\u9ed8\u8ba4\u503c",disabled:a})))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u662f\u5426\u53ef\u7a7a"}),e("isNullable")(J.a.createElement(oe["a"].Group,{disabled:!t},J.a.createElement(oe["a"],{value:"1"},"\u662f"),J.a.createElement(oe["a"],{value:"0"},"\u5426"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u5c5e\u6027\u6570\u503c\u7c7b\u578b"}),e("attrValueDataType")(J.a.createElement(X["a"],{disabled:a},J.a.createElement(Option,{value:"text"},"\u6587\u672c"),J.a.createElement(Option,{value:"number"},"\u6570\u5b57"),J.a.createElement(Option,{value:"date"},"\u65e5\u671f"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u662f\u5426\u52a8\u6001\u5c5e\u6027"}),e("isDanyAttr")(J.a.createElement(oe["a"].Group,{disabled:!t},J.a.createElement(oe["a"],{value:"1"},"\u662f"),J.a.createElement(oe["a"],{value:"0"},"\u5426"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u5c5e\u6027\u503c\u5206\u7c7b"}),e("attrValueType")(J.a.createElement(X["a"],{disabled:a},J.a.createElement(Option,{value:"text"},"\u8f93\u5165\u6027"),J.a.createElement(Option,{value:"number"},"\u679a\u4e3e\u578b"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u5c5e\u6027\u683c\u5f0f"}),e("attrFormat")(J.a.createElement(X["a"],{disabled:a},J.a.createElement(Option,{value:""},"--\u8bf7\u9009\u62e9--"),J.a.createElement(Option,{value:"yyyy-MM-dd HH:mm:ss"},"yyyy-MM-dd HH:mm:ss"),J.a.createElement(Option,{value:"yyyy-MM-dd"},"yyyy-MM-dd"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u5c5e\u6027\u503c\u957f\u5ea6"}),e("attrLength")(J.a.createElement(X["a"],{disabled:a},J.a.createElement(Option,{value:""},"--\u8bf7\u9009\u62e9--"),J.a.createElement(Option,{value:"s"},"\u5355\u5217"),J.a.createElement(Option,{value:"m"},"\u591a\u5217"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u72b6\u6001",required:!0}),e("statusCd",{})(J.a.createElement(Q["a"],{disabled:a||t})))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u662f\u5426\u6253\u5370"}),e("isPrint")(J.a.createElement(oe["a"].Group,{disabled:!t},J.a.createElement(oe["a"],{value:"1"},"\u662f"),J.a.createElement(oe["a"],{value:"0"},"\u5426"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u662f\u5426\u552f\u4e00"}),e("isUnique")(J.a.createElement(oe["a"].Group,{disabled:!t},J.a.createElement(oe["a"],{value:"1"},"\u662f"),J.a.createElement(oe["a"],{value:"0"},"\u5426"))))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u6b63\u5219\u8868\u8fbe\u5f0f"}),e("constraintExpress",{})(J.a.createElement(Q["a"],{disabled:a||t})))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u6b63\u5219\u63d0\u793a\u4fe1\u606f"}),e("constraintHintMsg",{})(J.a.createElement(Q["a"],{disabled:a||t})))),J.a.createElement(E["a"],{span:we},J.a.createElement(Se,S()({},Oe,{label:"\u5907\u6ce8"}),e("remark",{})(J.a.createElement(ye,{rows:4}))))))}}]),a}(U["Component"]),i=c))||i),ke=_["a"].create()(Ae),Ce=ke,Me=function(e){return e.value},Ie={id:{paramKey:"roleId",optional:!0,reduceRule:{reducers:[Me]}},name:{paramKey:"roleName",optional:!0,reduceRule:{reducers:[Me]}},pageNo:{paramKey:"pageNo"},pageSize:{paramKey:"pageSize"}},je=(Object(fe["createParamObjectWithMetaInfo"])(Ie),Q["a"].TextArea),Ne=_["a"].Item,xe={labelCol:{span:6},wrapperCol:{span:15,offset:1}},Fe=12,Ve=(u=Object(ae["connect"])(function(e){var a=e.meta;return{data:a}}),u((o=function(e){function a(e){var t;return K()(this,a),t=L()(this,z()(a).call(this,e)),t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){"add"===t.action?api.addAttrSpec(a).then(function(e){"0"==e.resultCode&&message.success("\u5c5e\u6027\u89c4\u683c\u65b0\u589e\u6210\u529f!")}):api.updateAttrSpec(a).then(function(e){"0"==e.resultCode&&message.success("\u5c5e\u6027\u89c4\u683c\u66f4\u65b0\u6210\u529f!")})})},t.state={},t.cache={pageMode:e.data.currentStep},t}return W()(a,e),T()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=this.cache.pageMode===ee["a"].view,t=this.cache.pageMode===ee["a"].edit;return J.a.createElement(_["a"],{onSubmit:this.handleSubmit},J.a.createElement(f["a"],null,J.a.createElement(E["a"],{span:Fe},J.a.createElement(Ne,S()({},xe,{label:"\u5c5e\u6027\u89c4\u683c"}),e("attrName",{})(J.a.createElement(Q["a"],{value:this.props.attrValue,disabled:a||t})))),J.a.createElement(E["a"],{span:Fe},J.a.createElement(Ne,S()({},xe,{label:"\u5c5e\u6027\u503c\u540d\u79f0"}),e("attrValueName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5c5e\u6027\u503c\u540d\u79f0!"}]})(J.a.createElement(Q["a"],{disabled:a||t})))),J.a.createElement(E["a"],{span:Fe},J.a.createElement(Ne,S()({},xe,{label:"\u5c5e\u6027\u503c"}),e("attrValue",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5c5e\u6027\u503c!"}]})(J.a.createElement(Q["a"],{disabled:a||t})))),J.a.createElement(E["a"],{span:Fe},J.a.createElement(Ne,S()({},xe,{label:"\u5c5e\u6027\u503c\u63cf\u8ff0"}),e("attrValueDesc",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5c5e\u6027\u503c!"}]})(J.a.createElement(je,{disabled:a||t}))))))}}]),a}(U["Component"]),s=o))||s),De=_["a"].create()(Ve),Re=De,Ke=(t("P2fV"),t("NJEC")),Pe=void 0,Te=[{label:"\u542f\u7528",value:"1"},{label:"\u7981\u7528",value:"0"}],Be=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[{title:"\u5c5e\u6027\u89c4\u683cID",dataIndex:"attrId",key:"attrId"},{title:"\u5c5e\u6027\u89c4\u683c\u540d",dataIndex:"attrName",key:"attrName"},{title:"\u5c5e\u6027\u89c4\u683c\u7f16\u7801",dataIndex:"attrNbr",key:"attrNbr"}];return e&&a.push({title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,a,t){return J.a.createElement("div",null,J.a.createElement("a",{onClick:function(){Pe.viewAttrSpec(a,t)}},"\u67e5\u770b"),J.a.createElement(Divider,{type:"vertical"}),J.a.createElement("a",{onClick:function(){Pe.editAttrSpec(a,t)}},"\u7f16\u8f91"),J.a.createElement(Divider,{type:"vertical"}),J.a.createElement(Ke["a"],{title:"\u8bf7\u786e\u8ba4\u662f\u5426\u5220\u9664\uff01",onConfirm:function(){Pe.deleteAttrSpec(a,t)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},J.a.createElement("a",null,"\u5220\u9664")))}}),a},Le=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[{title:"\u5c5e\u6027\u503cID",dataIndex:"attrValueId",key:"attrValueId"},{title:"\u5c5e\u6027\u503c\u540d",dataIndex:"attrValueName",key:"attrValueName"},{title:"\u5c5e\u6027\u503c",dataIndex:"attrValue",key:"attrValue"}];return e&&a.push({title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",render:function(e,a,t){return J.a.createElement("div",null,J.a.createElement("a",{onClick:function(){Pe.viewAttrValue(a,t)}},"\u67e5\u770b"),J.a.createElement(Divider,{type:"vertical"}),J.a.createElement("a",{onClick:function(){Pe.editAttrValue(a,t)}},"\u7f16\u8f91"),J.a.createElement(Divider,{type:"vertical"}),J.a.createElement(Ke["a"],{title:"\u8bf7\u786e\u8ba4\u662f\u5426\u5220\u9664\uff01",onConfirm:function(){Pe.deleteAttrValue(a,t)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},J.a.createElement("a",null,"\u5220\u9664")))}}),a},qe=t("vtgP"),ze=t.n(qe),He=function(e){function a(){var e,t;K()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=L()(this,(e=z()(a)).call.apply(e,[this].concat(r))),t.fetchUserDetail=function(){var e=D()(F.a.mark(function e(a){var n,r,l,i,c,u,s,o,d;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={userId:a},e.next=3,t.fetchData("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u8be6\u60c5",function(){return te["getUserDetail"](n)});case 3:if(r=e.sent,l=N()(r,2),i=l[0],c=l[1],!i){e.next=9;break}return e.abrupt("return",[i,null]);case 9:return u=c.user,s=c.userRoleList,o={type:{value:"".concat(u.userFounder)},account:{value:u.loginName||""},name:{value:u.userName||""},organization:{value:{value:u.orgId,label:u.orgName}},status:{value:"".concat(u.statusCd)},gender:{value:u.gender||""},telephone:{value:u.phoneNo||""},email:{value:u.email||""},remark:{value:u.remark||""},password:{value:""},confirmPassword:{value:""}},d=(s||[]).map(function(e){return{id:e.roleId,name:e.roleName}}),e.abrupt("return",[null,{detail:o,roles:d}]);case 13:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.fetchOrganizationSelectionsByParentId=function(){var e=D()(F.a.mark(function e(a,n){var r,l,i,c,u;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchOrganizationListByParentId(a);case 2:if(r=e.sent,l=N()(r,2),i=l[0],c=l[1],!i){e.next=8;break}return e.abrupt("return",[i,null]);case 8:return u=(c||[]).map(function(e){return{title:e.name,value:e.id,key:"".concat(n,"-").concat(e.id),children:e.children}}),e.abrupt("return",[null,u]);case 10:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}(),t.createBusiObj=function(){var e=D()(F.a.mark(function e(a){var n,r,l,i;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("\u521b\u5efa\u4e1a\u52a1\u5bf9\u8c61",function(){return te["a"](a)});case 2:if(n=e.sent,r=N()(n,2),l=r[0],i=r[1],!l){e.next=8;break}return e.abrupt("return",[l,null]);case 8:return e.abrupt("return",[null,i]);case 9:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.updateBusiObj=function(){var e=D()(F.a.mark(function e(a){var n,r,l,i;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("\u66f4\u65b0\u4e1a\u52a1\u5bf9\u8c61",function(){return te["udpateBusiObj"](a)});case 2:if(n=e.sent,r=N()(n,2),l=r[0],i=r[1],!l){e.next=8;break}return e.abrupt("return",[l,null]);case 8:return e.abrupt("return",[null,i]);case 9:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t}return W()(a,e),T()(a,null,[{key:"generateNewTreeData",value:function(e,a,t){var n=function e(n){n.forEach(function(n){0===a.indexOf(n.key)&&(n.children&&n.children.length>0?e(n.children):n.children=t)})};n(e)}}]),a}(ge["a"]),We=t("Od2o"),Ge=function(e){return e.value},Ue=function(e){return e.value.value},Je=function(e){return(e||[]).map(function(e){return e.id})},Ye={type:{paramKey:"userFounder",validator:We["a"].notEmptyString,validationFailureMessage:"\u8bf7\u9009\u62e9\u7c7b\u578b",reduceRule:{reducers:[Ge]}},name:{paramKey:"userName",validator:We["a"].notEmptyString,validationFailureMessage:"\u7528\u6237\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",reduceRule:{reducers:[Ge]}},organization:{paramKey:"orgId",validator:We["a"].notEmptyString,validationFailureMessage:"\u7ec4\u7ec7\u90e8\u95e8\u4e0d\u80fd\u4e3a\u7a7a",reduceRule:{reducers:[Ue]}},status:{paramKey:"statusCd",validator:We["a"].notEmptyString,validationFailureMessage:"\u8bf7\u9009\u62e9\u72b6\u6001",reduceRule:{reducers:[Ge]}},email:{paramKey:"email",validator:We["a"].isEmail,validationFailureMessage:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u7bb1",optional:!0,reduceRule:{reducers:[Ge]}},remark:{paramKey:"remark",reduceRule:{reducers:[Ge]}},chosenRoles:{paramKey:"roleIdList",validator:We["a"].notEmptyArray,validationFailureMessage:"\u8bf7\u9009\u62e9\u7528\u6237\u89d2\u8272",reduceRule:{reducers:[Je]}}},Ze=function(){return C()({},Ye,{busiObjNbr:{paramKey:"busiObjNbr",validator:We["a"].notEmptyString,validationFailureMessage:"\u4e1a\u52a1\u5bf9\u8c61\u7f16\u7801\u4e0d\u80fd\u4e3a\u7a7a",alwaysKeep:!0,reduceRule:{reducers:[Ge]}},busiObjName:{paramKey:"busiObjName",validator:We["a"].notEmptyString,validationFailureMessage:"\u4e1a\u52a1\u5bf9\u8c61\u540d\u4e0d\u80fd\u4e3a\u7a7a",optional:!0,reduceRule:{reducers:[Ge]}}})},Qe=function(){return C()({},Ye,{busiObjId:{paramKey:"busiObjId"}})},Xe=Object(fe["createParamObjectWithMetaInfo"])(Ze()),_e=Object(fe["createParamObjectWithMetaInfo"])(Qe()),$e=G["a"].TabPane,ea=Z["a"].SpinStatus,aa=(d=Object(ae["connect"])(function(e){var a=e.meta;return{data:a}}),d((m=function(e){function a(e){var t;return K()(this,a),t=L()(this,z()(a).call(this,e)),t.initialState=function(){return{infoFields:{busiObjId:{value:""},busiObjName:{value:""},busiObjDesc:{value:""},busiObjNbr:{value:""},parBusiObjId:{value:""}},options:{types:t.props.userTypeList,statuses:Te,organizations:[]},attrSpecList:[],spinStatus:ea.hidding,showModalAttrSpecNew:!1,showModalAttrValueNew:!1}},t.initialCache=function(e){return{pageMode:e.data.currentStep}},t.getBusiObjDetail=D()(F.a.mark(function e(){var a;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.props.data.record.busiObjId,a){e.next=3;break}return e.abrupt("return");case 3:te["i"](a).then(function(e){if(e.resultData){var a=e.resultData,n=a.detail;a.attrSpecList;t.setState({infoFields:n,attrSpecList:attrValueList})}});case 4:case"end":return e.stop()}},e,this)})),t.fetchOrganizationsAsTree=D()(F.a.mark(function e(){var a,n,r,l,i,c,u,s,o=arguments;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=o.length>0&&void 0!==o[0]?o[0]:-1,n=o.length>1&&void 0!==o[1]?o[1]:null,e.next=4,t.service.fetchOrganizationSelectionsByParentId(a,n?n.props.eventKey:a);case 4:if(r=e.sent,l=N()(r,2),i=l[0],c=l[1],!i){e.next=10;break}return e.abrupt("return",!1);case 10:return u=t.state.options,n?(s=I()(u.organizations),He.generateNewTreeData(s,n.props.eventKey,c),t.setState({options:C()({},u,{organizations:s})})):t.setState({options:C()({},u,{organizations:c})}),e.abrupt("return",!0);case 13:case"end":return e.stop()}},e,this)})),t.handleFormFieldsChange=function(e){t.setState(function(a){var t=a.infoFields;return{infoFields:C()({},t,e)}})},t.handleRemoveChosenRole=function(e,a){var n=t.state.attrSpecList;n.splice(a,1),t.setState({chosenRoles:n.slice()})},t.handleCommitAttrSpecAdd=function(){t.toggleAttrSpecAdd(!1)},t.handleCommitAttrValueAdd=function(){t.toggleAttrValueAdd(!1)},t.handleSubmit=D()(F.a.mark(function e(){var a,n,r,l,i,c,u,s,o,d;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=["busiObjId","busiObjName","busiObjNbr","busiObjDesc","parBusiObjId"],r=n.reduce(function(e,a){return e[a]=t.state.infoFields[a],e},{}),l=t.cache.pageMode===ee["a"].new?Xe(r):_e(r),i=null,e.prev=4,i=l.getParams(),e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](4),A["a"].error(e.t0.message),e.abrupt("return");case 12:if(a={},w()(a,ee["a"].new,te["a"]),w()(a,ee["a"].edit,te["w"]),c=a,u=c[t.cache.pageMode],!u){e.next=25;break}return e.next=17,u(i);case 17:if(s=e.sent,o=N()(s,2),d=o[0],o[1],!d){e.next=23;break}return e.abrupt("return");case 23:A["a"].success("\u4fdd\u5b58\u6210\u529f!"),t.handleGoBack(4);case 25:case"end":return e.stop()}},e,this,[[4,8]])})),t.handleGoBack=function(e){var a=t.props.dispatch;a({type:"staff/saveStep",payload:{currentStep:e}})},t.toggleAttrSpecAdd=function(e){t.setState({showModalAttrSpecNew:e})},t.toggleAttrValueAdd=function(e){t.setState({showModalAttrValueNew:e})},t.renderBasicInfoTab=function(e){return J.a.createElement(se,S()({},t.state.infoFields,{options:t.state.options,editable:e,handleFormFieldsChange:t.handleFormFieldsChange}))},t.renderAttrSpec=function(){var e={actionDelete:t.handleRemoveChosenRole},a=t.cache.pageMode!==ee["a"].view;return J.a.createElement(f["a"],null,a?J.a.createElement(E["a"],null,J.a.createElement(g["a"],{type:"primary",onClick:function(){t.toggleAttrSpecAdd(!0)}},"\u65b0\u589e\u5c5e\u6027\u89c4\u683c")):null,J.a.createElement(E["a"],{style:{marginTop:20}},J.a.createElement(v["a"],{dataSource:t.state.attrSpecList,columns:Be(e,a),rowKey:function(e){return e.attrId}})))},t.renderAttrValue=function(){var e={actionDelete:t.handleRemoveChosenRole},a=t.cache.pageMode!==ee["a"].view;return J.a.createElement(f["a"],null,a?J.a.createElement(E["a"],null,J.a.createElement(g["a"],{type:"primary",onClick:function(){t.toggleAttrValueAdd(!0)}},"\u65b0\u589e\u5c5e\u6027\u503c")):null,J.a.createElement(E["a"],{style:{marginTop:20}},J.a.createElement(v["a"],{dataSource:t.state.attrValueList,columns:Le(e,a),rowKey:function(e){return e.attrValueId}})))},t.renderModalAttrSpec=function(){return J.a.createElement(h["a"],{title:"\u5c5e\u6027\u89c4\u683c\u4fe1\u606f",visible:t.state.showModalAttrSpecNew,onOk:t.handleCommitAttrSpecAdd,onCancel:function(){t.toggleAttrSpecAdd(!1)},width:1e3,destroyOnClose:!0},J.a.createElement(Ce,{ref:t.attrSpecAddPanel,preSelections:t.state.attrSpecList}))},t.renderModalAttrValue=function(){return J.a.createElement(h["a"],{title:"\u5c5e\u6027\u503c\u4fe1\u606f",visible:t.state.showModalAttrValueNew,onOk:t.handleCommitAttrValueAdd,onCancel:function(){t.toggleAttrValueAdd(!1)},width:1e3,destroyOnClose:!0},J.a.createElement(Re,{ref:t.attrValueAddPanel,preSelections:t.state.attrValueList}))},t.renderActions=function(e){return J.a.createElement("div",{className:ze.a.actions},e?J.a.createElement(g["a"],{type:"primary",onClick:t.handleSubmit},"\u63d0\u4ea4"):null,J.a.createElement(g["a"],{style:{marginLeft:10},onClick:function(){t.handleGoBack(0)}},"\u53d6\u6d88"))},t.state=t.initialState(),t.cache=t.initialCache(e),t.service=new He,t.attrSpecAddPanel=J.a.createRef(),t.attrSpecValuePanel=J.a.createRef(),t}return W()(a,e),T()(a,[{key:"componentDidMount",value:function(){this.getBusiObjDetail()}},{key:"render",value:function(){var e=this.state.spinStatus,a={tip:e.tip,spinning:e.status!==ea.hidding.status},t=this.cache.pageMode!==ee["a"].view;return J.a.createElement(b["a"],a,J.a.createElement(Y["a"],null,J.a.createElement(G["a"],{defaultActiveKey:"1"},J.a.createElement($e,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},this.renderBasicInfoTab(t),this.renderActions(t)),J.a.createElement($e,{tab:"\u5c5e\u6027\u89c4\u683c\u4fe1\u606f",key:"2"},this.renderAttrSpec(),this.renderAttrValue(),this.renderModalAttrSpec(),this.renderModalAttrValue()))))}}]),a}(U["Component"]),p=m))||p);a["default"]=aa},vtgP:function(e,a,t){e.exports={actions:"actions___2p7Mo"}}}]);