(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[66],{"4/dU":function(e,a,t){e.exports={actions:"actions___1_65q"}},Gc0j:function(e,a,t){"use strict";t.r(a);t("T2oS");var n,r,l,i,o,c,s=t("W9HT"),u=(t("2qtc"),t("kLXV")),d=(t("14J3"),t("BMrR")),p=(t("g9YV"),t("wCAj")),h=(t("jCWc"),t("kPKH")),m=(t("+L6B"),t("2/Rp")),f=t("pVnL"),v=t.n(f),g=t("lSNA"),y=t.n(g),b=(t("miYZ"),t("tsqr")),w=t("MVZn"),E=t.n(w),S=t("RIqP"),k=t.n(S),R=t("o0o1"),F=t.n(R),C=t("J4zp"),x=t.n(C),M=t("yXPU"),T=t.n(M),P=t("lwsE"),I=t.n(P),O=t("W8MJ"),z=t.n(O),K=t("a1gu"),D=t.n(K),N=t("Nsbk"),q=t.n(N),A=t("7W2i"),U=t.n(A),j=(t("Znn+"),t("ZTPi")),L=t("q1tI"),B=t.n(L),Q=t("g4mk"),V=t("Bf72"),W=(t("nRaC"),t("5RzL")),H=(t("5NDa"),t("5rEg")),J=(t("OaEy"),t("2fM7")),Y=(t("y8nQ"),t("Vl3Y")),Z=t("wIs1"),_=t("mD99"),G=t("etS8"),X=t("MuoO"),$=t("HUA2"),ee=Y["a"].Item,ae=J["a"].Option,te={labelCol:{span:4},wrapperCol:{span:17,offset:1}},ne=12,re=(n=Object(X["connect"])(function(e){var a=e.staff;return{data:a}}),n((l=function(e){function a(e){var t;return I()(this,a),t=D()(this,q()(a).call(this,e)),t.fetchUserTypes=T()(F.a.mark(function e(){return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:Object($["o"])("USER_TYPE").then(function(e){if("0"==e.resultCode){var a=(e.resultData||[]).map(function(e){return B.a.createElement(ae,{value:e.pkey,key:e.pkey},e.pname)});t.setState({userTypeViews:a})}});case 1:case"end":return e.stop()}},e,this)})),t.handleLoadTreeSubNodes=function(e){var a=(e.props||{}).value||"";return!!a&&t.props.fetchOrganizationHandler(a,e)},t.renderPasswordArea=function(){var e=t.props.form.getFieldDecorator;return t.cache.pageMode===_["a"].new?B.a.createElement(L["Fragment"],null,B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u5bc6\u7801",required:!0}),e("password",{})(B.a.createElement(H["a"],{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:"password"})))),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u786e\u8ba4\u5bc6\u7801",required:!0}),e("confirmPassword",{})(B.a.createElement(H["a"],{placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",type:"password"}))))):null},t.state={userTypeViews:""},t.cache={pageMode:e.data.currentStep},t}return U()(a,e),z()(a,[{key:"componentDidMount",value:function(){this.fetchUserTypes(),this.props.editable&&this.props.fetchOrganizationHandler()}},{key:"render",value:function(){var e=this.props.options,a=void 0===e||e,t=this.props.form.getFieldDecorator,n=(a.statuses||[]).map(function(e){return B.a.createElement(ae,{value:e.value,key:e.value},e.label)}),r=this.cache.pageMode===_["a"].view,l=this.cache.pageMode===_["a"].edit,i=B.a.createElement(W["a"],{placeholder:"\u8bf7\u8f93\u5165\u7ec4\u7ec7\u90e8\u95e8",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:a.organizations,loadData:this.handleLoadTreeSubNodes,onSelect:this.handleSelectTreeNode,labelInValue:!0,disabled:r});return B.a.createElement(Y["a"],null,B.a.createElement(d["a"],null,B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u7528\u6237\u7c7b\u578b",required:!0}),t("type",{})(B.a.createElement(J["a"],{placeholder:"\u8bf7\u9009\u62e9\u7528\u6237\u7c7b\u578b",disabled:r||l},this.state.userTypeViews)))),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u7528\u6237\u5de5\u53f7",required:!0}),t("account",{})(B.a.createElement(H["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u5de5\u53f7",disabled:r||l})))),this.renderPasswordArea(this.props.showPassword),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u7528\u6237\u540d\u79f0",required:!0}),t("name",{})(B.a.createElement(H["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0",disabled:r})))),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u7ec4\u7ec7\u90e8\u95e8",required:!0}),t("organization",{})(i))),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u72b6\u6001",required:!0}),t("status",{})(B.a.createElement(J["a"],{placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001",disabled:r},n)))),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u624b\u673a\u53f7\u7801",required:!0}),t("telephone")(B.a.createElement(G["a"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",integer:!0,disabled:r||l})))),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u7528\u6237\u90ae\u7bb1"}),t("email",{})(B.a.createElement(H["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u90ae\u7bb1",disabled:r})))),B.a.createElement(h["a"],{span:ne},B.a.createElement(ee,v()({},te,{label:"\u5907\u6ce8"}),t("remark",{})(B.a.createElement(H["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8",disabled:r}))))))}}]),a}(L["Component"]),r=l))||r),le={onFieldsChange:function(e,a){e.handleFormFieldsChange(a)},mapPropsToFields:function(e){var a=["type","account","name","organization","status","telephone","email","remark","password","confirmPassword"],t={};return a.forEach(function(a){t[a]=Y["a"].createFormField(E()({},e[a],{value:e[a].value}))}),t}},ie=Y["a"].create(le)(re),oe=Object(Z["a"])(Object(_["b"])(ie,2)),ce=oe,se=Y["a"].Item,ue=(J["a"].Option,10),de={labelCol:{span:8},wrapperCol:{span:15,offset:1}},pe=function(e){function a(){var e,t;I()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=D()(this,(e=q()(a)).call.apply(e,[this].concat(r))),t.handleSubmit=function(e){e.preventDefault(),t.props.handleQuery&&t.props.handleQuery()},t}return U()(a,e),z()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return B.a.createElement(Y["a"],{onSubmit:this.handleSubmit},B.a.createElement(d["a"],null,B.a.createElement(h["a"],{span:ue},B.a.createElement(se,v()({},de,{label:"\u89d2\u8272\u7f16\u7801"}),e("id")(B.a.createElement(H["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),B.a.createElement(h["a"],{span:ue},B.a.createElement(se,v()({},de,{label:"\u89d2\u8272\u540d\u79f0"}),e("name")(B.a.createElement(H["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),B.a.createElement(h["a"],{span:4},B.a.createElement(se,{style:{textAlign:"right"}},B.a.createElement(m["a"],{htmlType:"submit",type:"primary"},"\u641c\u7d22")))))}}]),a}(L["Component"]),he={onFieldsChange:function(e,a){e.handleFormFieldsChange(a)},mapPropsToFields:function(e){var a=["id","name"],t={};return a.forEach(function(a){t[a]=Y["a"].createFormField(E()({},e[a],{value:e[a].value}))}),t}},me=Y["a"].create(he)(pe),fe=me,ve=fe,ge=[{title:"\u89d2\u8272\u7f16\u7801",dataIndex:"id",key:"id"},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"name"}],ye=10,be=t("dP+C"),we=function(e){return e.value},Ee={id:{paramKey:"roleId",optional:!0,reduceRule:{reducers:[we]}},name:{paramKey:"roleName",optional:!0,reduceRule:{reducers:[we]}},pageNo:{paramKey:"pageNo"},pageSize:{paramKey:"pageSize"}},Se=Object(be["createParamObjectWithMetaInfo"])(Ee),ke=Se,Re=t("UOXh"),Fe=function(e){function a(e){var t;return I()(this,a),t=D()(this,q()(a).call(this,e)),t.initialState=function(e){return{queryFields:{id:{value:""},name:{value:""}},records:[],pagination:{current:1,total:0,pageSize:ye},selectedRowKeys:(e.preSelections||[]).map(function(e){return e.id}),loadingTable:!1}},t.initialCache=function(e){return{selections:e.preSelections||[]}},t.getSelections=function(){return t.cache.selections},t.handleFormFieldsChange=function(e){t.setState(function(a){var t=a.queryFields;return{queryFields:E()({},t,e)}})},t.handleQuery=T()(F.a.mark(function e(){var a,n,r,l,i,o,c,s,u,d,p,h=arguments;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=h.length>0&&void 0!==h[0]?h[0]:1,t.setState({loadingTable:!0}),n={id:t.state.queryFields.id,name:t.state.queryFields.name,pageNo:a,pageSize:ye},r=ke(n),l=r.getParams(),e.prev=5,e.next=8,t.service.getUserRoleList(l);case 8:if(i=e.sent,o=x()(i,2),c=o[0],s=o[1],!c){e.next=14;break}return e.abrupt("return");case 14:u=s.roles,d=s.current,p=s.total,t.setState(function(e){var a=e.pagination;return{pagination:E()({},a,{current:d,total:p}),records:u}});case 16:return e.prev=16,t.setState({loadingTable:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[5,,16,19]])})),t.handleRowSelectionChange=function(e,a){t.handleSelectionsChange(a,[e])},t.handleAllRowsSelectionChange=function(e){t.handleSelectionsChange(e,t.state.records)},t.handleSelectionsChange=function(e,a){var n=(t.cache.selections||[]).map(function(e){return[e.id,e]}),r=new Map(n);(a||[]).forEach(function(a){e?r.set(a.id,a):r.delete(a.id)}),t.cache.selections=Array.from(r.values()),t.setState({selectedRowKeys:t.cache.selections.map(function(e){return e.id})})},t.handleTableChange=function(e){var a=e.current;t.handleQuery(a)},t.renderQueryForm=function(){return B.a.createElement(ve,v()({},t.state.queryFields,{options:t.state.options,handleQuery:t.handleQuery,handleFormFieldsChange:t.handleFormFieldsChange}))},t.renderTable=function(){var e=t.state,a=e.records,n=e.pagination,r=e.loadingTable,l=e.selectedRowKeys;return B.a.createElement(p["a"],{style:{height:300,overflowY:"scroll"},columns:ge,dataSource:a,pagination:n,loading:r,onChange:t.handleTableChange,rowSelection:{selectedRowKeys:l,onSelect:t.handleRowSelectionChange,onSelectAll:t.handleAllRowsSelectionChange}})},t.state=t.initialState(e),t.cache=t.initialCache(e),t.service=new Re["a"],t}return U()(a,e),z()(a,[{key:"componentDidMount",value:function(){this.handleQuery()}},{key:"render",value:function(){return B.a.createElement(L["Fragment"],null,this.renderQueryForm(),this.renderTable())}}]),a}(L["Component"]),Ce=Fe,xe=Ce,Me=(t("P2fV"),t("NJEC")),Te=function(){},Pe={actionDelete:Te},Ie=[{label:"\u542f\u7528",value:"1"},{label:"\u7981\u7528",value:"0"}],Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=[{title:"\u89d2\u8272\u7f16\u7801",dataIndex:"id",key:"id"},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"name"}];return a&&t.push({title:"\u7f16\u8f91",dataIndex:"operations",key:"operations",render:function(a,t,n){return B.a.createElement(Me["a"],{title:"\u8bf7\u786e\u8ba4\u662f\u5426\u5220\u9664\u8be5\u89d2\u8272\u7684\u914d\u7f6e",onConfirm:function(){e.actionDelete(t,n)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},B.a.createElement("a",null,"\u5220\u9664"))}}),t},ze=(t("4/dU"),t("k9Yu")),Ke=function(e){function a(){var e,t;I()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=D()(this,(e=q()(a)).call.apply(e,[this].concat(r))),t.fetchUserDetail=function(){var e=T()(F.a.mark(function e(a){var n,r,l,i,o,c,s,u,d;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={userId:a},e.next=3,t.fetchData("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u8be6\u60c5",function(){return ze["f"](n)});case 3:if(r=e.sent,l=x()(r,2),i=l[0],o=l[1],!i){e.next=9;break}return e.abrupt("return",[i,null]);case 9:return c=o.user,s=o.userRoleList,u={type:{value:"".concat(c.userFounder)},account:{value:c.loginName||""},name:{value:c.userName||""},organization:{value:{value:c.orgId,label:c.orgName}},status:{value:"".concat(c.statusCd)},gender:{value:c.gender||""},telephone:{value:c.phoneNo||""},email:{value:c.email||""},remark:{value:c.remark||""},password:{value:""},confirmPassword:{value:""}},d=(s||[]).map(function(e){return{id:e.roleId,name:e.roleName}}),e.abrupt("return",[null,{detail:u,roles:d}]);case 13:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.fetchOrganizationSelectionsByParentId=function(){var e=T()(F.a.mark(function e(a,n){var r,l,i,o,c;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchOrganizationListByParentId(a);case 2:if(r=e.sent,l=x()(r,2),i=l[0],o=l[1],!i){e.next=8;break}return e.abrupt("return",[i,null]);case 8:return c=(o||[]).map(function(e){return{title:e.name,value:e.id,key:"".concat(n,"-").concat(e.id),children:e.children}}),e.abrupt("return",[null,c]);case 10:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}(),t.createUser=function(){var e=T()(F.a.mark(function e(a){var n,r,l,i;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("\u521b\u5efa\u7528\u6237",function(){return ze["c"](a)});case 2:if(n=e.sent,r=x()(n,2),l=r[0],i=r[1],!l){e.next=8;break}return e.abrupt("return",[l,null]);case 8:return e.abrupt("return",[null,i]);case 9:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.updateUser=function(){var e=T()(F.a.mark(function e(a){var n,r,l,i;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("\u66f4\u65b0\u7528\u6237\u4fe1\u606f",function(){return ze["k"](a)});case 2:if(n=e.sent,r=x()(n,2),l=r[0],i=r[1],!l){e.next=8;break}return e.abrupt("return",[l,null]);case 8:return e.abrupt("return",[null,i]);case 9:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t}return U()(a,e),z()(a,null,[{key:"generateNewTreeData",value:function(e,a,t){var n=function e(n){n.forEach(function(n){0===a.indexOf(n.key)&&(n.children&&n.children.length>0?e(n.children):n.children=t)})};n(e)}}]),a}(Re["a"]),De=t("Od2o"),Ne=function(e){return e.value},qe=function(e){return e.value.value},Ae=function(e){return(e||[]).map(function(e){return e.id})},Ue={type:{paramKey:"userFounder",validator:De["a"].notEmptyString,validationFailureMessage:"\u8bf7\u9009\u62e9\u7c7b\u578b",reduceRule:{reducers:[Ne]}},name:{paramKey:"userName",validator:De["a"].notEmptyString,validationFailureMessage:"\u7528\u6237\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",reduceRule:{reducers:[Ne]}},organization:{paramKey:"orgId",validator:De["a"].notEmptyString,validationFailureMessage:"\u7ec4\u7ec7\u90e8\u95e8\u4e0d\u80fd\u4e3a\u7a7a",reduceRule:{reducers:[qe]}},status:{paramKey:"statusCd",validator:De["a"].notEmptyString,validationFailureMessage:"\u8bf7\u9009\u62e9\u72b6\u6001",reduceRule:{reducers:[Ne]}},email:{paramKey:"email",validator:De["a"].isEmail,validationFailureMessage:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u90ae\u7bb1",optional:!0,reduceRule:{reducers:[Ne]}},remark:{paramKey:"remark",reduceRule:{reducers:[Ne]}},chosenRoles:{paramKey:"roleIdList",validator:De["a"].notEmptyArray,validationFailureMessage:"\u8bf7\u9009\u62e9\u7528\u6237\u89d2\u8272",reduceRule:{reducers:[Ae]}}},je=function(){return E()({},Ue,{account:{paramKey:"loginName",validator:De["a"].notEmptyString,validationFailureMessage:"\u7528\u6237\u5de5\u53f7\u4e0d\u80fd\u4e3a\u7a7a",alwaysKeep:!0,reduceRule:{reducers:[Ne]}},password:{paramKey:"loginPwd",validator:De["a"].notEmptyString,validationFailureMessage:"\u8bf7\u8f93\u5165\u7528\u6237\u5bc6\u7801",optional:!0,reduceRule:{reducers:[Ne]}},telephone:{paramKey:"phoneNo",validator:De["a"].isTelephone,validationFailureMessage:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",reduceRule:{reducers:[Ne]}}})},Le=function(){return E()({},Ue,{userId:{paramKey:"userId"}})},Be=Object(be["createParamObjectWithMetaInfo"])(je()),Qe=Object(be["createParamObjectWithMetaInfo"])(Le()),Ve=t("WnAZ"),We=j["a"].TabPane,He=V["a"].SpinStatus,Je=(i=Object(X["connect"])(function(e){var a=e.staff;return{data:a}}),i((c=function(e){function a(e){var t;return I()(this,a),t=D()(this,q()(a).call(this,e)),t.initialState=function(){return{infoFields:{type:{value:""},account:{value:""},name:{value:""},organization:{value:{label:"",value:""}},status:{value:Ie[0].value},telephone:{value:""},email:{value:""},remark:{value:""},password:{value:""},confirmPassword:{value:""}},options:{types:t.props.userTypeList,statuses:Ie,organizations:[]},chosenRoles:[],spinStatus:He.hidding,showModalRoleSelection:!1,loading:!1}},t.initialCache=function(e){return{pageMode:e.data.currentStep}},t.fetchUserDetail=T()(F.a.mark(function e(){var a,n,r,l,i,o,c;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.props.data.recode.key,a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.service.fetchUserDetail(a);case 5:if(n=e.sent,r=x()(n,2),l=r[0],i=r[1],!l){e.next=11;break}return e.abrupt("return");case 11:o=i.detail,c=i.roles,t.setState({infoFields:o,chosenRoles:c});case 13:case"end":return e.stop()}},e,this)})),t.fetchOrganizationsAsTree=T()(F.a.mark(function e(){var a,n,r,l,i,o,c,s,u=arguments;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:-1,n=u.length>1&&void 0!==u[1]?u[1]:null,e.next=4,t.service.fetchOrganizationSelectionsByParentId(a,n?n.props.eventKey:a);case 4:if(r=e.sent,l=x()(r,2),i=l[0],o=l[1],!i){e.next=10;break}return e.abrupt("return",!1);case 10:return c=t.state.options,n?(s=k()(c.organizations),Ke.generateNewTreeData(s,n.props.eventKey,o),t.setState({options:E()({},c,{organizations:s})})):t.setState({options:E()({},c,{organizations:o})}),e.abrupt("return",!0);case 13:case"end":return e.stop()}},e,this)})),t.handleFormFieldsChange=function(e){t.setState(function(a){var t=a.infoFields;return{infoFields:E()({},t,e)}})},t.handleRemoveChosenRole=function(e,a){var n=t.state.chosenRoles;n.splice(a,1),t.setState({chosenRoles:n.slice()})},t.handleCommitRoleSelection=function(){t.toggleRoleSelection(!1);var e=t.roleSelectionPanel.current.getSelections();t.setState({chosenRoles:e})},t.handleSubmit=T()(F.a.mark(function e(){var a,n,r,l,i,o,c,s,u,d,p,h,m;return F.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=["type","account","name","organization","status","telephone","email","remark"],t.cache.pageMode!==_["a"].new){e.next=9;break}if(r=t.state.infoFields,l=r.password,i=r.confirmPassword,l.value===i.value){e.next=6;break}return b["a"].error("\u5bc6\u7801\u524d\u540e\u8f93\u5165\u4e0d\u4e00\u81f4"),e.abrupt("return");case 6:n.push("password"),e.next=10;break;case 9:t.cache.pageMode===_["a"].edit&&n.push("userId");case 10:o=n.reduce(function(e,a){return e[a]=t.state.infoFields[a],e},{}),o.chosenRoles=t.state.chosenRoles,t.cache.pageMode===_["a"].edit&&(o.userId=t.props.data.recode.key),c=t.cache.pageMode===_["a"].new?Be(o):Qe(o),s=null,e.prev=15,s=c.getParams(),e.next=23;break;case 19:return e.prev=19,e.t0=e["catch"](15),b["a"].error(e.t0.message),e.abrupt("return");case 23:if(a={},y()(a,_["a"].new,t.service.createUser),y()(a,_["a"].edit,t.service.updateUser),u=a,t.setState({loading:!0}),d=u[t.cache.pageMode],!d){e.next=38;break}return e.next=29,d(s);case 29:if(p=e.sent,h=x()(p,2),m=h[0],h[1],t.setState({loading:!1}),!m){e.next=36;break}return e.abrupt("return");case 36:b["a"].success("\u4fdd\u5b58\u6210\u529f!"),t.handleGoBack(4);case 38:case"end":return e.stop()}},e,this,[[15,19]])})),t.handleGoBack=function(e){var a=t.props.dispatch;a({type:"staff/saveStep",payload:{currentStep:e}})},t.toggleRoleSelection=function(e){t.setState({showModalRoleSelection:e})},t.renderBasicInfoTab=function(e){return B.a.createElement(ce,v()({},t.state.infoFields,{options:t.state.options,editable:e,handleFormFieldsChange:t.handleFormFieldsChange,fetchOrganizationHandler:t.fetchOrganizationsAsTree}))},t.renderRoleTab=function(){var e={actionDelete:t.handleRemoveChosenRole};return B.a.createElement(d["a"],null,t.cache.pageMode!==_["a"].view?B.a.createElement(h["a"],null,B.a.createElement(m["a"],{type:"primary",onClick:function(){t.toggleRoleSelection(!0)}},"\u9009\u62e9\u89d2\u8272")):null,B.a.createElement(h["a"],{style:{marginTop:20}},B.a.createElement(p["a"],{dataSource:t.state.chosenRoles,columns:Oe(e,t.cache.pageMode!==_["a"].view),rowKey:function(e){return e.id}})))},t.renderModalRoleSelection=function(){return B.a.createElement(u["a"],{title:"\u9009\u62e9\u89d2\u8272",visible:t.state.showModalRoleSelection,onOk:t.handleCommitRoleSelection,onCancel:function(){t.toggleRoleSelection(!1)},width:800,destroyOnClose:!0},B.a.createElement(xe,{ref:t.roleSelectionPanel,preSelections:t.state.chosenRoles}))},t.renderActions=function(e){return B.a.createElement("div",null,B.a.createElement(m["a"],{style:{marginLeft:10},onClick:function(){t.handleGoBack(0)}},"\u8fd4\u56de"),e?B.a.createElement(m["a"],{type:"primary",onClick:t.handleSubmit,loading:t.state.loading},"\u63d0\u4ea4"):null)},t.state=t.initialState(),t.cache=t.initialCache(e),t.service=new Ke,t.roleSelectionPanel=B.a.createRef(),t}return U()(a,e),z()(a,[{key:"componentDidMount",value:function(){this.fetchUserDetail()}},{key:"render",value:function(){var e=this.state.spinStatus,a={tip:e.tip,spinning:e.status!==He.hidding.status},t=this.cache.pageMode!==_["a"].view;return B.a.createElement(s["a"],a,B.a.createElement(Q["a"],null,B.a.createElement(j["a"],{defaultActiveKey:"1"},B.a.createElement(We,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},this.renderBasicInfoTab(t)),B.a.createElement(We,{tab:"\u4eba\u5458\u89d2\u8272",key:"2"},this.renderRoleTab(),this.renderModalRoleSelection()))),B.a.createElement(Ve["a"],null,B.a.createElement("div",null,this.renderActions(t))))}}]),a}(L["Component"]),o=c))||o);a["default"]=Je}}]);