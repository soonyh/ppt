(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[113],{Ndav:function(e,t,a){"use strict";a.r(t);a("g9YV");var n,r,l,o,s=a("wCAj"),c=(a("IzEo"),a("bx4M")),i=(a("qVdP"),a("jsC+")),m=(a("lUTK"),a("BvKs")),u=(a("/zsF"),a("PArb")),p=(a("Awhp"),a("KrTs")),d=(a("14J3"),a("BMrR")),h=(a("Pwec"),a("CtXQ")),g=(a("+L6B"),a("2/Rp")),E=(a("6UJt"),a("DFOY")),y=(a("jCWc"),a("kPKH")),k=a("pVnL"),f=a.n(k),v=(a("miYZ"),a("tsqr")),b=a("MVZn"),w=a.n(b),R=a("lwsE"),T=a.n(R),S=a("W8MJ"),x=a.n(S),C=a("a1gu"),F=a.n(C),N=a("Nsbk"),I=a.n(N),M=a("7W2i"),z=a.n(M),L=(a("2qtc"),a("kLXV")),P=(a("5NDa"),a("5rEg")),D=(a("y8nQ"),a("Vl3Y")),O=a("q1tI"),q=a.n(O),V=a("g4mk"),j=(a("rR2S"),a("SwfG")),J=(a("wd/R"),a("xqX8"),a("MuoO")),A=D["a"].Item,K=(P["a"].Group,L["a"].confirm,{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),B=(n=Object(J["connect"])(function(e){var t=e.resource;return{data:t,listData:t.listData}}),r=D["a"].create(),n(l=r((o=function(e){function t(e){var a;return T()(this,t),a=F()(this,I()(t).call(this,e)),a.getMktResourceList=function(e){var t={};e&&(Object.assign(t,e),e.mktResPettyType&&(t.mktResType=e.mktResPettyType[0],t.mktResPettyType=e.mktResPettyType[1]));a.props.listData;a.props.dispatch({type:"resource/queryMktResource",payload:w()({pageSize:a.state.pageSize||10,pageNo:a.state.pageNo||1},t)})},a.onPageChange=function(e){a.setState({pageNo:e},a.getMktResourceList)},a.onShowSizeChange=function(e,t){a.setState({pageSize:t,pageNo:e},a.getMktResourceList)},a.showTotal=function(e,t){return"\u5171 ".concat(e," \u6761\u8bb0\u5f55 \u7b2c").concat(t[0],"-").concat(t[1],"\u6761 ")},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){a.getMktResourceList(t)})},a.handleFormReset=function(){a.props.form.resetFields(),a.getMktResourceList({pageNo:1,pageSize:10})},a.actionHandler=function(e,t){"view"==e?a.props.dispatch({type:"resource/saveResource",payload:{index:2,params:t}}):"stop"==e?L["a"].confirm({title:"\u505c\u7528\u8d44\u6e90",content:"\u786e\u5b9a\u505c\u7528\u8be5\u8d44\u6e90\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){v["a"].success("\u505c\u7528\u6210\u529f\uff01")}}):"start"==e?L["a"].confirm({title:"\u542f\u7528\u8d44\u6e90",content:"\u786e\u5b9a\u542f\u7528\u8be5\u8d44\u6e90\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){v["a"].success("\u542f\u7528\u6210\u529f\uff01")}}):"edit"==e||"delete"==e&&L["a"].confirm({title:"\u5220\u9664\u8d44\u6e90",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8d44\u6e90\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){v["a"].success("\u5220\u9664\u6210\u529f\uff01")}})},a.renderMktResType=function(e,t){var n="";return a.state.resourceType.forEach(function(a,r){a.value==e&&a.children.forEach(function(e,r){e.value==t&&(n=a.label+"/"+e.label)})}),n},a.state={inputValue:"",mktResList:[],pageNo:1,pageSize:10,total:0,expandForm:!1,resourceType:[{value:"00",label:"\u5168\u90e8"},{value:"01",label:"\u670d\u52a1\u7c7b"},{value:"02",label:"\u4ea7\u54c1\u7c7b"},{value:"03",label:"\u4e1a\u52a1\u7c7b"},{value:"1000",label:"\u8d44\u6e90\u7c7b",children:[{value:"1000",label:"\u548c\u5305\u5238"},{value:"1001",label:"\u5546\u6237\u62b5\u91d1\u5238"},{value:"1002",label:"\u4f53\u9a8c\u5361"},{value:"1003",label:"\u4e92\u8054\u7f51\u4f1a\u5458"}]}]},a}return z()(t,e),x()(t,[{key:"componentWillMount",value:function(){this.props.data;this.getMktResourceList()}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return q.a.createElement(D["a"],{onSubmit:this.handleSearch},q.a.createElement(d["a"],{gutter:{md:8,lg:24,xl:48}},q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement(A,f()({label:"\u6743\u76ca\u8d44\u6e90"},K),e("mktResNameOrNbr")(q.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165\u6743\u76ca\u540d\u79f0\u6216\u7f16\u53f7"})))),q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement(A,f()({label:"\u8d44\u6e90\u7c7b\u578b"},K),e("mktResPettyType")(q.a.createElement(E["a"],{expandTrigger:"hover",options:this.state.resourceType,placeholder:"\u8bf7\u9009\u62e9",showSearch:!0})))),q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement("span",null,q.a.createElement(g["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),q.a.createElement(g["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),q.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u9ad8\u7ea7\u67e5\u8be2 ",q.a.createElement(h["a"],{type:"down"}))))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator;return q.a.createElement(D["a"],{onSubmit:this.handleSearch},q.a.createElement(d["a"],{gutter:{md:8,lg:24,xl:48}},q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement(A,f()({label:"\u6743\u76ca\u8d44\u6e90"},K),e("mktResNameOrNbr")(q.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement(A,f()({label:"\u8d44\u6e90\u7c7b\u578b"},K),e("mktResPettyType")(q.a.createElement(E["a"],{expandTrigger:"hover",options:this.state.resourceType,placeholder:"\u8bf7\u9009\u62e9",showSearch:!0})))),q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement("div",{style:{overflow:"hidden"}},q.a.createElement("div",{style:{float:"right",marginBottom:24}},q.a.createElement(g["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),q.a.createElement(g["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),q.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",q.a.createElement(h["a"],{type:"up"})))))),q.a.createElement(d["a"],{gutter:{md:8,lg:24,xl:48}},q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement(A,f()({label:"\u4f7f\u7528\u573a\u666f"},K),e("sceneCd")(q.a.createElement(j["a"],{className:"MktResource",attrCode:"sceneCd"})))),q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement(A,f()({label:"\u542f\u7528\u72b6\u6001"},K),e("statusCd")(q.a.createElement(j["a"],{className:"MktResource",attrCode:"statusCd"}))))),q.a.createElement(d["a"],{gutter:{md:8,lg:24,xl:48}},q.a.createElement(y["a"],{md:8,sm:24},q.a.createElement(A,f()({label:"\u5907\u6ce8"},K),e("remark")(q.a.createElement(P["a"],{placeholder:"\u8bf7\u8f93\u5165"}))))))}},{key:"render",value:function(){var e=this,t=[{title:"\u8d44\u6e90\u7f16\u7801",dataIndex:"mktResNbr",key:"mktResNbr",width:"13%"},{title:"\u6743\u76ca\u8d44\u6e90\u540d\u79f0",dataIndex:"mktResName",width:"13"},{title:"\u7c7b\u578b",dataIndex:"mktResTypeId",width:"13%",render:function(t,a){return e.renderMktResType(a.mktResType,a.mktResPettyType)}},{title:"\u72b6\u6001",dataIndex:"statusCd",width:"10%",render:function(e,t){return"1000"==t.statusCd?q.a.createElement(O["Fragment"],null,q.a.createElement(p["a"],{status:"success"})," \u542f\u7528"):"1100"==t.statusCd?q.a.createElement(O["Fragment"],null,q.a.createElement(p["a"],{status:"error"})," \u505c\u7528"):void 0}},{title:"\u7ed3\u7b97\u5355\u4ef7(\u5143)",dataIndex:"balancePrice",width:"10%"},{title:"\u53ef\u9500\u5e93\u5b58",dataIndex:"storeEnableNum",width:"10%"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createDate",sorter:!0},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(t,a){return q.a.createElement("span",null,q.a.createElement("a",{href:"javascript:;",onClick:function(){e.actionHandler("view",a)}},"\u8be6\u60c5"),q.a.createElement(u["a"],{type:"vertical"}),q.a.createElement(i["a"],{overlay:q.a.createElement(m["a"],{onClick:function(t){var n=t.key;return e.actionHandler(n,a)}},q.a.createElement(m["a"].Item,{key:"edit"},"\u4fee\u6539"),"1000"==a.statusCd?q.a.createElement(m["a"].Item,{key:"stop"},"\u505c\u7528"):q.a.createElement(m["a"].Item,{key:"start"},"\u542f\u7528"),q.a.createElement(m["a"].Item,{key:"delete"},"\u5220\u9664"))},q.a.createElement("a",null,"\u66f4\u591a ",q.a.createElement(h["a"],{type:"down"}))))}}],a=(this.props.data,this.props.data.listData),n=(a.list,a.pagination);n.total,n.pageSize,n.pageNo;return q.a.createElement("div",null,q.a.createElement(c["a"],{title:"\u6743\u76ca\u8d44\u6e90\u7ba1\u7406",extra:q.a.createElement(g["a"],{icon:"plus-square",type:"primary",onClick:function(){e.props.dispatch({type:"resource/switch",payload:{index:1,currentStep:0,selectedTemplate:{}}})}},"\u521b\u5efa")},q.a.createElement("div",null,this.renderForm())),q.a.createElement(V["a"],null,q.a.createElement(V["b"],null,q.a.createElement(s["a"],{rowKey:"mktResId",columns:t,dataSource:a.list,showTotal:function(e){return e},pagination:{current:a.pagination.pageNo,pageSize:a.pagination.pageSize,total:a.pagination.total,onChange:this.onPageChange,showTotal:this.showTotal,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","30","40","50"],onShowSizeChange:this.onShowSizeChange}}))))}}]),t}(O["Component"]),l=o))||l)||l);t["default"]=B}}]);